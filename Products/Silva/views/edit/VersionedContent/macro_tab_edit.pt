<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
   tal:omit-tag=""
   lang="en"
   xml:lang="en"
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:metal="http://xml.zope.org/namespaces/metal"
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:i18n="http://xml.zope.org/namespaces/i18n"
   i18n:domain="silva"
   tal:define="no_empty_feedback python:True">

  <metal:define-macro define-macro="editor">
    <metal:use-macro metal:use-macro="here/macro_index/macros/master">

      <metal:fill-slot fill-slot="metatype_css">
        <tal:condition
          tal:define="
               request_pending request/model/is_version_approval_requested;
               unapproved_version request/model/get_unapproved_version;
               preview_mode python:(not unapproved_version) or request_pending"
          tal:condition="preview_mode">
          <link rel="stylesheet"
                type="text/css"
                tal:attributes="href here/globals/frontend.css/absolute_url | nothing"
                />
          <link rel="stylesheet"
                type="text/css"
                tal:define="overrider here/globals/override_editor.css/absolute_url | nothing"
                tal:condition="exists:overrider"
                tal:attributes="href overrider"
                />
          <style type="text/css">
            div.public {
            margin: 12px 16px 10px 16px;
            padding: 0.3em 1em 0.7em;
            border: 1px solid #789;
            background-color: #e3ecf7;}
            h2 {
            margin-top: 0.3em;
            }
          </style>
        </tal:condition>
        <metal:block define-slot="editor_css" />
      </metal:fill-slot>

      <metal:block fill-slot="refresher">
        <metal:block define-slot="editor_refresher" />
      </metal:block>

      <metal:block fill-slot="script">
        <metal:block define-slot="script" />
        <script type="text/javascript" tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/popupkupu.js"></script>
      </metal:block>

      <metal:block metal:fill-slot="middleground">
        <tal:buttons tal:replace="structure model/@@tab_edit_extra" />
      </metal:block>

      <span tal:replace="nothing"> ___ author may edit ___ </span>
      <metal:fill-slot
         fill-slot="main"
         tal:define="
               request_pending request/model/is_version_approval_requested;
               unapproved_version request/model/get_unapproved_version;
               preview_mode python:(not unapproved_version) or request_pending">
        <span tal:replace="nothing"> ___ show editor ___ </span>
        <tal:block condition="not:preview_mode">
          <metal:block define-slot="editor_content" />
        </tal:block>
        <span tal:replace="nothing"> ___ or preview document ___ </span>
        <tal:block condition="preview_mode">
          <div class="public"
               tal:content="structure model/preview">
          </div>
        </tal:block>
      </metal:fill-slot>

    </metal:use-macro>
  </metal:define-macro>
</html>
