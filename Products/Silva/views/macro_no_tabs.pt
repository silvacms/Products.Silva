<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html metal:define-macro="master"
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva"
  tal:define="
    model request/model;
    trigger model/security_trigger;
    icon python:here.render_icon(model);

    type model/meta_type;
    url model/absolute_url;
    title python: model.get_title_editable() or model.id;
    root_url model/get_root_url;
    global publication model/get_publication;
    global containing_publication publication/../get_publication | publication;
    silva_permissions here/get_silva_permissions;
    may_approve_content silva_permissions/ApproveSilvaContent | nothing;
    may_change_content silva_permissions/ChangeSilvaContent | nothing;

    mangle modules/Products/Silva/mangle;
">
<head>
  <tal:block replace="structure request/model/set_content_type_and_nocache" />
<title tal:content="title">
  Title
</title>
<tal:favicon replace="structure provider:favicon" />
<tal:resource replace="structure provider:resources" />
<metal:block define-slot="extension_css" />
<tal:block replace="nothing"> _______ hooks for refresh function _______ </tal:block>
<metal:block define-slot="meta" />
<script type="text/javascript"
        tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/helperscripts.js"></script>
<script type="text/javascript"
        tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/handler_registry.js"></script>
<script type="text/javascript" 
        tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/reference.js"></script>
<metal:block define-slot="script" />
</head>
<body onload="window.onload_registry.callHandlers()">

<span tal:replace="nothing">
<!-- ____________________________ start workspace ____________________________ -->
</span>
<div class="workspace">

<span tal:replace="nothing">
<!-- ______________ start feedback ______________ -->
</span>
<tal:block define="
  type options/message_type | request/message_type | nothing;
  notice options/message | request/message | nothing;"
  condition="type">
  <div class="feedback"
    tal:attributes="class python:type == 'feedback' and 'fixed-feedback' or (type == 'error' and 'fixed-alert' or 'fixed-clear')">
    <span tal:replace="structure notice">
      message
    </span>
    <tal:block tal:condition="python:type == 'feedback'">
      &nbsp;&nbsp;(<tal:block tal:replace="structure python:mangle.Now().toShortStr()" />)
    </tal:block>
  </div>
</tal:block>
<span tal:replace="nothing">
<!-- ______________ end feedback ______________ -->
</span>

<!-- _____________________ main start _____________________ -->
<div metal:define-slot="main">
  Here the local content (a.k.a. "model") is inserted (this text will be replaced).
</div>
<!-- _____________________ main ends _____________________ -->


<span tal:replace="nothing">
<!-- ____________________________ workspace ends ____________________________ -->
</span>
</div>

</body>
</html>
