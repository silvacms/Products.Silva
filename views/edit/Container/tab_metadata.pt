<!-- ___________________________ start index_html ___________________________ -->
<html  metal:use-macro="here/macro_index/macros/master">
<div class="margins"
  metal:fill-slot="main">
<!-- ___________________________ start index_html/slot main ___________________________ -->

<h2><img src="%s" width="16" height="16" alt="%s" 
      tal:replace="structure python:view.render_icon(model.meta_type)" />&nbsp;
  Metadata for <span class="document-title" tal:content="structure string:&laquo;${model/get_title_html}&raquo;">title here</span>
</h2>
<init tal:omit-tag=""
  tal:define="global fields python:view.tab_metadata_form.get_fields()" />

<form method="POST" name="form" action="tab_metadata_submit">
<table width="96%" cellspacing="0" cellpadding="3" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
    cellpadding container/table_cellpadding; border container/table_border">
<tr>
  <th align="left" width="15%">
    Element
  </th>
  <th align="right">
    &nbsp;
  </th>
  <th align="left">
    Content
  </th>
  <th align="left" width="30%">
    Note
  </th>
</tr>

<fieldset tal:omit-tag=""
  tal:repeat="field fields">
<rowset tal:omit-tag=""
  tal:define="oddrow repeat/field/odd">

<tr class="focus" valign="top"
  tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">
  <td align="right">
    <span tal:replace="structure string:${field/title}:">Title</span>
  </td>
  <td align="right">
    <span class="warning"
      tal:condition="python:field.is_required()">
      *
    </span>
    <span class="logic"
      tal:condition="not:python:field.is_required()"
      tal:omit-tag="">
      &nbsp;
    </span>
  </td>
  <td align="left">
    <input tal:replace="structure python:field.render(value=model.getProperty(field.id))" />
  </td>
  <td>
    <span tal:replace="python:field.get_value('description')">
      comments here (field description)
    </span><br />
    <span tal:condition="python:field.id == 'contact_name' or field.id == 'contact_email' or field.id == 'subject'" tal:omit-tag="">(<i tal:content="python:getattr(model, field.id, 'None')"></i>)</span>
  </td>
</tr>
</rowset>
</fieldset>
<tr class="controls">
  <td colspan="4" align="right">
    <input class="button" type="submit"
      name="form_submitted" value=" change item "
      tal:attributes="value string: Save metadata " />
  </td>
</tr>
</table>
</form>
        
<span tal:replace="structure here/tab_metadata_extra | nothing" tal:omit-tag="" />

<table width="96%" cellspacing="0" cellpadding="3" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
    cellpadding container/table_cellpadding; border container/table_border">
<tr valign="top">
  <td align="right" width="15%">
    Chief Editor(s):
  </td>
  <td>&nbsp;</td>
  <td align="left">
    <span tal:replace="python:', '.join([ch['cn'] for ch in here.get_nearest_chiefeditors()])" />
  </td>
  <td width="30%">&nbsp;</td>
</tr>

<tr valign="top">
  <td align="right">
    Manager(s):
  </td>
  <td>&nbsp;</td>
  <td align="left">
    <span tal:replace="python:', '.join([m['cn'] for m in here.get_nearest_managers()])" /> <br />
  </td>
  <td>&nbsp;</td>
</tr>

</table>

<p class="halfline">&nbsp;</p>

<check tal:omit-tag=""
  tal:condition="python:request.AUTHENTICATED_USER.has_permission('Change Silva access', model)">
  <dummy tal:omit-tag="" tal:define="dummy python:model.security_trigger()" />

  <h3>Authorized users below this level</h3>

  <form>
    <span class="textarea">
      <textarea name="data" cols="65" rows="5" wrap="soft"><repeat tal:omit-tag="" tal:repeat="userid model/sec_get_userids_deep"><span tal:define="userinfo python:model.sec_get_user_info(userid)"
        tal:condition="userinfo/mail | nothing" tal:replace="userinfo/mail">
        userid
      </span><span tal:omit-tag="" tal:condition="not:repeat/userid/end">, </span></repeat></textarea>
    </span>
  </form>
</check>

<!-- ___________________________ end index_html/slot main ___________________________ -->
</div>

</html>
<!-- ___________________________ end index_html ___________________________ -->