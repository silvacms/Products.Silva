<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:rename;
    global active_tab string:tab_edit;
    "
  i18n:domain="silva">
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main"
  tal:define="objects view/REQUEST/ids">

<tal:if condition="python:view.REQUEST.has_key('ids')">
<div class="focus-rectangle"
  style="padding-top:1px;">
  <form action="tab_edit_rename_submit" method="post">
    <table class="listing">
      <thead>
        <tr>
          <td class="top"
            colspan="3">
            <h2 i18n:translate="">
              <img tal:replace="structure python:view.render_icon(model)" />
              rename objects in
              &#xab;<tal:plug content="title" i18n:name="title" />&#xbb;
            </h2>
          </td>
        </tr>
      </thead>

      <tbody>
        <tr>
          <th class="align-right" i18n:translate="">
            attribute
          </th>
          <th i18n:translate="">
            old
          </th>
          <th width="66%"
            i18n:translate="">
            new
          </th>
        </tr>

        <tal:repeat repeat="objectid objects">
        <tal:define define="
          object python:getattr(model, objectid);
          objId object/getId;
        ">
        <tr class="odd" valign="top">
          <td class="align-right" i18n:translate="">
            id
          </td>
          <td>
            <tal:plug replace="python: mangle.String.centeredTruncate(objId, 30)" />&nbsp;
          </td>
          <td>
            <input class="store"
              type="text"
              name="name"
              value="value"
              tal:attributes="
                name string:id_$objId;
                value objId;
            " />
<script type="text/javascript"
  tal:define="focusfield string:id_$objId"
  tal:condition="repeat/objectid/start"
  tal:content="structure python:here.focus_editor(focusfield)" />
          </td>
          </tr>

          <tr class="even" valign="top">
          <td class="align-right" i18n:translate="">
            title
          </td>
          <td tal:define="title python: object.get_title_editable()" >
            <em tal:condition="not: title" i18n:translate="">no title</em>
            <tal:plug condition="title"
              content="python: mangle.String.centeredTruncate(title, 30)"
              attributes="title title"
            />
          </td>
          <td tal:define="
            title object/get_title_editable | object/get_title;
            is_title_editable object/can_set_title;
          ">
            <input class="store"
              type="text"
              name="name"
              value="value"
              tal:condition="is_title_editable"
              tal:attributes="
                name string:title_$objId;
                value title;
            " />
              <tal:plug condition="not: is_title_editable"
                content="title"
              />
          </td>
        </tr>
        <tr class="divider"
          tal:condition="not:repeat/objectid/end">
          <td colspan="5">
          </td>
        </tr>
        </tal:define>
        </tal:repeat>
      </tbody>

      <tfoot>
        <tr class="controls">
          <td colspan="3">
            <input class="button"
              style="float:right"
              type="submit"
              value="rename"
              title="access key: alt-r"
              accesskey="r"
              i18n:attributes="value;title"
            />
            <input class="cancel"
              type="button"
              name="edit_cancel"
              value="cancel"
              onclick="history.back()"
              title="access key: alt-c"
              accesskey="c"
              i18n:attributes="value;title"
            />
          </td>
        </tr>
      </tfoot>
    </table>
  </form>
</div>
</tal:if>

</metal:block>
</metal:block>
</html>
